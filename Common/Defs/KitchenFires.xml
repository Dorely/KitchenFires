<Defs>

  <!-- Ankle Sprain Hediff -->
  <HediffDef>
    <defName>AnkleSprain</defName>
    <label>sprained ankle</label>
    <description>A twisted or sprained ankle from stepping awkwardly on uneven terrain or obstacles. Causes pain and reduces movement speed.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <defaultLabelColor>(179, 179, 156)</defaultLabelColor>
    <makesSickThought>false</makesSickThought>
    <tendable>true</tendable>
    <isBad>true</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.5</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
      <li Class="HediffCompProperties_GetsPermanent">
        <becomePermanentChanceFactor>0.02</becomePermanentChanceFactor>
        <permanentLabel>old ankle injury</permanentLabel>
      </li>
    </comps>
    <stages>
      <li>
        <label>minor</label>
        <minSeverity>0</minSeverity>
        <painOffset>0.05</painOffset>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.05</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>moderate</label>
        <minSeverity>0.25</minSeverity>
        <painOffset>0.10</painOffset>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.15</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>severe</label>
        <minSeverity>0.4</minSeverity>
        <painOffset>0.15</painOffset>
        <capMods>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.25</offset>
          </li>
        </capMods>
      </li>
    </stages>
    <injuryProps>
      <painPerSeverity>0.125</painPerSeverity>
      <averagePainPerSeverityPermanent>0.0625</averagePainPerSeverityPermanent>
      <bleedRate>0</bleedRate>
      <canMerge>false</canMerge>
      <destroyedLabel>mangled</destroyedLabel>
      <destroyedOutLabel>mangled off</destroyedOutLabel>
    </injuryProps>
  </HediffDef>

  <!-- Kitchen Incident Definitions -->
  <IncidentDef>
    <defName>KitchenFire_Small</defName>
    <label>kitchen fire (small)</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_KitchenFire_Small</workerClass>
    <baseChance>1.5</baseChance>
    <minRefireDays>2</minRefireDays>
    <letterText>A small kitchen fire has started while {0} was cooking! The flames are manageable but could spread if not handled quickly.</letterText>
    <letterLabel>Kitchen fire</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>

  <IncidentDef>
    <defName>KitchenFire_Large</defName>
    <label>kitchen fire (large)</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_KitchenFire_Large</workerClass>
    <baseChance>0.8</baseChance>
    <minRefireDays>3</minRefireDays>
    <letterText>A dangerous kitchen fire has erupted while {0} was cooking! The flames are large and spreading rapidly through the cooking area.</letterText>
    <letterLabel>Kitchen fire</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>

  <IncidentDef>
    <defName>KitchenExplosion</defName>
    <label>kitchen explosion</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_KitchenExplosion</workerClass>
    <baseChance>0.3</baseChance>
    <minRefireDays>5</minRefireDays>
    <letterText>A small explosion has erupted from the cooking equipment while {0} was working! Cooking gas or overheated equipment has caused a dangerous blast.</letterText>
    <letterLabel>Kitchen explosion</letterLabel>
    <letterDef>ThreatSmall</letterDef>
  </IncidentDef>

  <IncidentDef>
    <defName>KitchenBurn</defName>
    <label>cooking burn</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_KitchenBurn</workerClass>
    <baseChance>2.2</baseChance>
    <minRefireDays>1</minRefireDays>
    <letterText>{0} has suffered a burn injury while cooking! Hot oil, steam, or cooking surfaces have caused a painful burn.</letterText>
    <letterLabel>Cooking accident</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>

  <!-- Butchering Accident Definitions -->
  <IncidentDef>
    <defName>ButcheringAccident_Cut</defName>
    <label>butchering cut</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_ButcheringCut</workerClass>
    <baseChance>1.8</baseChance>
    <minRefireDays>1</minRefireDays>
    <letterText>{0} has suffered a cut while butchering! Sharp knives and slippery meat have caused a painful wound.</letterText>
    <letterLabel>Butchering accident</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>

  <IncidentDef>
    <defName>ButcheringAccident_Amputation</defName>
    <label>butchering amputation</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_ButcheringAmputation</workerClass>
    <baseChance>0.4</baseChance>
    <minRefireDays>5</minRefireDays>
    <letterText>{0} has suffered a severe amputation while butchering! A mishap with butchering tools has caused a traumatic injury.</letterText>
    <letterLabel>Severe butchering accident</letterLabel>
    <letterDef>ThreatSmall</letterDef>
  </IncidentDef>

  <!-- Movement Accident Definitions -->
  <IncidentDef>
    <defName>TrippingAccident</defName>
    <label>tripping accident</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_TrippingAccident</workerClass>
    <baseChance>1.2</baseChance>
    <minRefireDays>0.5</minRefireDays>
    <letterText>{0} tripped while moving over obstacles, dropping what they were carrying and spraining an ankle.</letterText>
    <letterLabel>Tripping accident</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>

  
  <!-- Eating Accident Hediffs -->
  <HediffDef>
    <defName>Choking</defName>
    <label>choking</label>
    <description>Airway obstruction while eating causes pain and shortness of breath. Usually resolves on its own but can be severe.</description>
    <hediffClass>HediffWithComps</hediffClass>
    <tendable>false</tendable>
    <isBad>true</isBad>
    <stages>
      <li>
        <label>minor</label>
        <minSeverity>0.0</minSeverity>
        <painOffset>0.08</painOffset>
        <capMods>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.10</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>moderate</label>
        <minSeverity>0.25</minSeverity>
        <painOffset>0.15</painOffset>
        <capMods>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.25</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>severe</label>
        <minSeverity>0.45</minSeverity>
        <painOffset>0.25</painOffset>
        <capMods>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.35</offset>
          </li>
        </capMods>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.6</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
    </comps>
  </HediffDef>

  <HediffDef>
    <defName>ChokingCritical</defName>
    <label>choking (critical)</label>
    <description>Severe airway blockage is preventing breathing. Immediate medical intervention is required to avoid hypoxia and death.</description>
    <hediffClass>KitchenFires.Hediff_ChokingCritical</hediffClass>
    <tendable>true</tendable>
    <isBad>true</isBad>
    <stages>
      <li>
        <label>airway blocked</label>
        <minSeverity>0.0</minSeverity>
        <painOffset>1.0</painOffset>
        <capMods>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.35</offset>
          </li>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.10</offset>
          </li>
        </capMods>
      </li>
      <li>
        <label>hypoxic</label>
        <minSeverity>0.7</minSeverity>
        <painOffset>1.0</painOffset>
        <capMods>
          <li>
            <capacity>Breathing</capacity>
            <offset>-0.60</offset>
          </li>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.20</offset>
          </li>
        </capMods>
      </li>
    </stages>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>0.2</severityPerDay>
      </li>
      <li Class="HediffCompProperties_GetsPermanent">
        <becomePermanentChanceFactor>0.05</becomePermanentChanceFactor>
      </li>
    </comps>
  </HediffDef>
  <!-- Eating Accident Definitions -->
  <IncidentDef>
    <defName>EatingAccident_Choking</defName>
    <label>choking while eating</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_EatingChoking</workerClass>
    <baseChance>0.6</baseChance>
    <minRefireDays>0.5</minRefireDays>
    <letterText>{0} began choking while eating and needed help.</letterText>
    <letterLabel>Choking incident</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>

  <!-- Eating Accident Thoughts -->
  <ThoughtDef>
    <defName>SpilledFood</defName>
    <label>spilled food</label>
    <durationDays>0.2</durationDays>
    <stackLimit>1</stackLimit>
    <thoughtClass>Thought_Memory</thoughtClass>
    <stages>
      <li>
        <label>spilled food</label>
        <description>Spilled their meal and made a mess.</description>
        <baseMoodEffect>-3</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>  
  <!-- Work Accident Incident -->
  <IncidentDef>
    <defName>WorkAccident</defName>
    <label>work accident</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_WorkAccident</workerClass>
    <baseChance>1.2</baseChance>
    <minRefireDays>1.5</minRefireDays>
    <letterText>{0} suffered a work accident while performing manual labor. Be cautious around mining, chopping, planting, and harvesting tasks.</letterText>
    <letterLabel>Work accident</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>  
  <!-- Sleep Accident: Nightmare -->
  <IncidentDef>
    <defName>SleepAccident_Nightmare</defName>
    <label>nightmare</label>
    <category>ThreatSmall</category>
    <targetTags>
      <li>Map_PlayerHome</li>
    </targetTags>
    <workerClass>KitchenFires.IncidentWorker_SleepNightmare</workerClass>
    <baseChance>0.6</baseChance>
    <minRefireDays>0.6</minRefireDays>
    <letterText>{0} awoke from a terrifying nightmare and is running in panic!</letterText>
    <letterLabel>Nightmare</letterLabel>
    <letterDef>NegativeEvent</letterDef>
  </IncidentDef>
  <!-- Night terror aftermath mood debuff -->
  <ThoughtDef>
    <defName>NightTerrorAftermath</defName>
    <label>night terror aftermath</label>
    <durationDays>0.3</durationDays>
    <stackLimit>1</stackLimit>
    <thoughtClass>Thought_Memory</thoughtClass>
    <stages>
      <li>
        <label>shaken by a night terror</label>
        <description>Still shaken from a terrifying nightmare.</description>
        <baseMoodEffect>-4</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>
  <!-- Custom mental state: NightTerror -->
  <MentalStateDef ParentName="BaseMentalState">
    <defName>NightTerror</defName>
    <label>night terror</label>
    <stateClass>KitchenFires.MentalState_NightTerror</stateClass>
    <category>Misc</category>
    <nameColor>(0.65, 0.9, 0.93)</nameColor>
    <stateEffecter MayRequire="Ludeon.RimWorld.Anomaly">TerrifyingHallucinations</stateEffecter>
    <beginLetterLabel>night terror</beginLetterLabel>
    <beginLetter>{0} awoke from a terrifying nightmare and is fleeing in panic.</beginLetter>
    <recoveryMessage>{0} recovered from a night terror.</recoveryMessage>
    <baseInspectLine>Mental state: Night terror</baseInspectLine>
    <blockNormalThoughts>true</blockNormalThoughts>
    <stopsJobs>true</stopsJobs>
    <minTicksBeforeRecovery>1000</minTicksBeforeRecovery>
    <maxTicksBeforeRecovery>1000</maxTicksBeforeRecovery>
    <moodRecoveryThought>NightTerrorAftermath</moodRecoveryThought>
  </MentalStateDef>
</Defs>
